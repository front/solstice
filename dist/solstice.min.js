/**
 * A simple Solr wrapper for AngularJS apps
 * @version v0.0.3 - 2017-11-09
 * @link https://github.com/front/solstice
 * @author Élio Cró <elio@front.no>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(t){"use strict";var n=t.module("solstice",[]);n.provider("Solstice",[function(){var n="";return{setEndpoint:function(t){n=t},$get:["$http","$sce",function(r,e){function o(n){this.search=function(o){var s=e.trustAsResourceUrl(n+"/select/"),i={wt:"json"};return t.extend(i,o),r.jsonp(s,{params:i,jsonpCallbackParam:"json.wrf"})},this.withEndpoint=function(t){return new o(t)}}return new o(n)}]}}]),n.directive("solrSearch",[function(){return{restrict:"AE",transclude:!0,replace:!1,template:"<div ng-transclude></div>",scope:{q:"@query",start:"@",rows:"@",sort:"@",fl:"@fields",indexUrl:"@"},controller:["$scope","Solstice",function(t,n){var r=t.indexUrl?n.withEndpoint(t.indexUrl):n,e={q:t.q||"*:*",start:t.start||0,rows:t.rows||10};t.sort&&(e.sort=t.sort),t.fl&&(e.fl=t.fl),r.search(e).then(function(n){var r=n.data.response;(t.$$childHead||t.$$nextSibling).solr={results:r.docs,count:r.numFound}}).catch(function(t){window.console.error(t.data)})}]}}])}(window.angular);